% -------------------------------------------------------------------
% FAST Coursework Template - Core package imports
% -------------------------------------------------------------------
% This file centralises package loading so higher-level options can stay inside options.tex. Only adjust these settings when you need to add or remove functionality for the whole project.

% Engine guard: FAST targets XeLaTeX workflows (local + Overleaf).
\usepackage{ifxetex}
\usepackage{ifluatex}
\ifxetex\else
  \PackageError{fast-template}{FAST targets XeLaTeX only}{Switch your compiler to XeLaTeX (xelatex) when building this project.}
\fi
\ifluatex
  \PackageError{fast-template}{FAST targets XeLaTeX only}{Switch your compiler to XeLaTeX (xelatex) when building this project.}
\fi

% Encoding, fonts, and language handling tuned for XeLaTeX.
\usepackage{fontspec}
\defaultfontfeatures{Ligatures=TeX}
\setmainfont{Latin Modern Roman}
\setsansfont{Latin Modern Sans}
\setmonofont{Latin Modern Mono}
\usepackage{xeCJK}
\xeCJKsetup{CJKmath=true}
\newcommand{\TemplateSetupCJKFonts}{%
  \IfFontExistsTF{Noto Serif CJK SC}{%
    \setCJKmainfont{Noto Serif CJK SC}%
  }{%
    \IfFontExistsTF{Source Han Serif SC}{%
      \setCJKmainfont{Source Han Serif SC}%
    }{%
      \IfFontExistsTF{Songti SC}{%
        \setCJKmainfont{Songti SC}%
      }{%
        \IfFontExistsTF{STSong}{%
          \setCJKmainfont{STSong}%
        }{%
          \setCJKmainfont{SimSun}%
        }%
      }%
    }%
  }%
  \IfFontExistsTF{Noto Sans CJK SC}{%
    \setCJKsansfont{Noto Sans CJK SC}%
  }{%
    \IfFontExistsTF{Source Han Sans SC}{%
      \setCJKsansfont{Source Han Sans SC}%
    }{%
      \IfFontExistsTF{Microsoft YaHei}{%
        \setCJKsansfont{Microsoft YaHei}%
      }{%
        \setCJKsansfont{SimHei}%
      }%
    }%
  }%
  \IfFontExistsTF{Noto Sans Mono CJK SC}{%
    \setCJKmonofont{Noto Sans Mono CJK SC}%
  }{%
    \IfFontExistsTF{Sarasa Mono SC}{%
      \setCJKmonofont{Sarasa Mono SC}%
    }{%
      \setCJKmonofont{SimSun}%
    }%
  }%
}
\TemplateSetupCJKFonts

\usepackage[english]{babel}
\usepackage{microtype}
\usepackage{csquotes}

% Page geometry and spacing
\usepackage{geometry}
\geometry{margin=1in}
\usepackage{setspace}
\onehalfspacing
\ifTemplateWordLikeLayout
  \usepackage{parskip} % Relaxed spacing when mimicking word-processor layout.
\fi
\usepackage{indentfirst} % Ensure first paragraph after headings respects indentation.

% Mathematics and tables
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{booktabs}

% Graphics and floats
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{pdfpages}

% Code listings and numeric formatting
\usepackage{listings}
\usepackage{siunitx}

% Hyperlinks and clever referencing
\usepackage{hyperref}
\usepackage{cleveref}

% Header/footer and title formatting
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{xcolor}
\usepackage{enumitem}

% Bibliography handled through classic BibTeX, so no extra package wiring here.
